

<!DOCTYPE html>
<html class="writer-html5" lang="ja" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pytestã§ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’å°å…¥ã™ã‚‹ &mdash; PyCon JP 2020 ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« Slack Botç·¨ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ 2020.07.24 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script src="_static/translations.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="ç´¢å¼•" href="genindex.html" />
    <link rel="search" title="æ¤œç´¢" href="search.html" />
    <link rel="next" title="Sphinxã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›¸ã“ã†" href="sphinx.html" />
    <link rel="prev" title="Slackbotã®ä½œæˆ" href="slackbot.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> PyCon JP 2020 ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« Slack Botç·¨ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="prepare.html">ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«é–‹å§‹å‰ã®æº–å‚™</a></li>
<li class="toctree-l1"><a class="reference internal" href="vscode.html">VS Codeã¨Live Shareã®è¨­å®š</a></li>
<li class="toctree-l1"><a class="reference internal" href="slackbot.html">Slackbotã®ä½œæˆ</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">pytestã§ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’å°å…¥ã™ã‚‹</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">pytestã‚³ãƒãƒ³ãƒ‰ã®ä½¿ã„æ–¹</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">ãƒ†ã‚¹ãƒˆã®å¤±æ•—</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">ãƒ†ã‚¹ãƒˆã®æˆåŠŸ</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id4">pytestã®æ©Ÿèƒ½</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#parametrize">parametrize</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fixture">fixture</a></li>
<li class="toctree-l3"><a class="reference internal" href="#monkeypatch">monkeypatch</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id5">pytestã‚³ãƒãƒ³ãƒ‰ã¯è‡ªå‹•çš„ã«ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¢ã™</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id6">ä¼‘æ†©3ğŸ§˜â€â™‚ï¸</a></li>
<li class="toctree-l2"><a class="reference internal" href="#slackbot">SlackBotã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’æ›¸ã„ã¦ã¿ã‚ˆã†</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id7">ä¸‹æº–å‚™</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bot">å„botã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã«ã¤ã„ã¦</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id8">ä¼‘æ†©4ğŸªâ˜•</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="sphinx.html">Sphinxã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›¸ã“ã†</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PyCon JP 2020 ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« Slack Botç·¨ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>pytestã§ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’å°å…¥ã™ã‚‹</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/pytest.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pytest">
<h1>pytestã§ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’å°å…¥ã™ã‚‹<a class="headerlink" href="#pytest" title="ã“ã®ãƒ˜ãƒƒãƒ‰ãƒ©ã‚¤ãƒ³ã¸ã®ãƒ‘ãƒ¼ãƒãƒªãƒ³ã‚¯">Â¶</a></h1>
<p>SlackbotãŒè¿”ã™çµæœã‚’ãƒ†ã‚¹ãƒˆã§ãã‚‹ã‚ˆã†ã«ã€ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®å°å…¥ã‚’è¡Œã„ã¾ã™ã€‚</p>
<p>ä»Šå›ã¯ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã®ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹pytestã‚’åˆ©ç”¨ã—ã¾ã™ã€‚Pytestã¯Pythonæ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚ã‚‹Unittestã‚ˆã‚Šç°¡å˜ã«ãƒ†ã‚¹ãƒˆã®è¨˜è¿°ãŒå¯èƒ½ã§ã™ã€‚</p>
<p><a class="reference external" href="https://docs.pytest.org/en/stable/">pytest: helps you write better programs â€” pytest documentation</a></p>
<div class="section" id="id1">
<h2>pytestã‚³ãƒãƒ³ãƒ‰ã®ä½¿ã„æ–¹<a class="headerlink" href="#id1" title="ã“ã®ãƒ˜ãƒƒãƒ‰ãƒ©ã‚¤ãƒ³ã¸ã®ãƒ‘ãƒ¼ãƒãƒªãƒ³ã‚¯">Â¶</a></h2>
<p>pytestã¯ã™ã§ã«ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã‚’ç”¨æ„ã—ãŸæ®µéšã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã™ã€‚ <code class="docutils literal notranslate"><span class="pre">pytest</span></code> ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ç¢ºèªã§ãã¾ã™ã€‚ã‚‚ã—ã‚³ãƒãƒ³ãƒ‰ãŒå­˜åœ¨ã—ãªã„ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚‹å ´åˆã¯pipã‚³ãƒãƒ³ãƒ‰ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">.</span><span class="n">venv</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>pytestã‚’ä½¿ã£ãŸãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã¯ <code class="docutils literal notranslate"><span class="pre">pytest</span></code> ã‚³ãƒãƒ³ãƒ‰ã§ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œã¨çµæœã‚’ç¢ºèªã§ãã¾ã™ã€‚</p>
<p>ã¾ãšåˆã‚ã«ç°¡å˜ãªãƒ†ã‚¹ãƒˆã‚’ä½œæˆã—ã¦ã€ãƒ†ã‚¹ãƒˆã®å¤±æ•—ã¨æˆåŠŸã®æ§˜å­ã‚’ç¢ºèªã—ã¾ã™ã€‚</p>
<div class="section" id="id2">
<h3>ãƒ†ã‚¹ãƒˆã®å¤±æ•—<a class="headerlink" href="#id2" title="ã“ã®ãƒ˜ãƒƒãƒ‰ãƒ©ã‚¤ãƒ³ã¸ã®ãƒ‘ãƒ¼ãƒãƒªãƒ³ã‚¯">Â¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_pytest</span><span class="p">():</span>
    <span class="k">assert</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">2</span>
</pre></div>
</div>
<p>ç‰¹å¾´çš„ãªéƒ¨åˆ†ã¨ã—ã¦ã¯ã€ pythonã®assertæ–‡ã‚’ä½¿ã£ã¦ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’å®šç¾©ã—ã¾ã™ã€‚</p>
<div class="admonition note">
<p class="admonition-title">æ³¨é‡ˆ</p>
<p>Assertæ–‡ã¯ <cite>assert [çœŸå½åˆ¤æ–­ãŒã§ãã‚‹å¼]</cite> ã¨æ›¸ãã“ã¨ã§ã€å¼ãŒå½ã¨ãªã‚‹å ´åˆã¯AssertErrorã¨ã„ã†ä¾‹å¤–ã‚’ç™ºç”Ÿã•ã›ã¾ã™ã€‚ç°¡æ˜“çš„ãªãƒ‡ãƒãƒƒã‚°ç”¨é€”ã«æ‰±ã†ã“ã¨ãŒã§ãã¾ã™ã€‚
<a class="reference external" href="https://docs.python.org/ja/3/reference/simple_stmts.html#assert">https://docs.python.org/ja/3/reference/simple_stmts.html#assert</a></p>
</div>
<p>ã“ã®ãƒ†ã‚¹ãƒˆã¯å¤±æ•—ã—ã¾ã™ã€‚pytestã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Windows 10ã®å ´åˆ</span>
<span class="p">(</span><span class="o">.</span><span class="n">venv</span><span class="p">)</span><span class="n">tutorial_docs</span><span class="o">&gt;</span> <span class="n">pytest</span> <span class="o">.</span>\<span class="n">step</span>\<span class="n">pytest</span><span class="o">-</span><span class="mi">1</span>\<span class="n">test_hello_pytest</span><span class="o">.</span><span class="n">py</span>

<span class="c1"># macOSã®å ´åˆ</span>
<span class="p">(</span><span class="o">.</span><span class="n">venv</span><span class="p">)</span><span class="n">tutorial_docs</span><span class="o">&amp;</span> <span class="n">pytest</span> <span class="o">./</span><span class="n">step</span><span class="o">/</span><span class="n">pytest</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="n">test_hello_pytest</span><span class="o">.</span><span class="n">py</span>

<span class="c1"># ãƒ†ã‚¹ãƒˆçµæœã¯Windows 10ã®ä¾‹</span>
<span class="o">=============================================================</span> <span class="n">test</span> <span class="n">session</span> <span class="n">starts</span> <span class="o">=============================================================</span>
<span class="n">platform</span> <span class="n">win32</span> <span class="o">--</span> <span class="n">Python</span> <span class="mf">3.7</span><span class="o">.</span><span class="mi">3</span><span class="p">,</span> <span class="n">pytest</span><span class="o">-</span><span class="mf">6.0</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="n">py</span><span class="o">-</span><span class="mf">1.9</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="n">pluggy</span><span class="o">-</span><span class="mf">0.13</span><span class="o">.</span><span class="mi">1</span>
<span class="n">rootdir</span><span class="p">:</span> <span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">hiroshi</span>\<span class="n">Documents</span>\<span class="n">pycon</span><span class="o">-</span><span class="n">jp</span><span class="o">-</span><span class="mi">2020</span><span class="o">-</span><span class="n">tutorial</span>\<span class="n">tutorial_docs</span>
<span class="n">collected</span> <span class="mi">1</span> <span class="n">item</span>

<span class="n">step</span>\<span class="n">pytest</span><span class="o">-</span><span class="mi">1</span>\<span class="n">test_hello_pytest</span><span class="o">.</span><span class="n">py</span> <span class="n">F</span>                                                                                                     <span class="p">[</span><span class="mi">100</span><span class="o">%</span><span class="p">]</span>

<span class="o">==================================================================</span> <span class="n">FAILURES</span> <span class="o">===================================================================</span>
<span class="n">_________________________________________________________________</span> <span class="n">test_pytest</span> <span class="n">_________________________________________________________________</span>

    <span class="k">def</span> <span class="nf">test_pytest</span><span class="p">():</span>
<span class="o">&gt;</span>       <span class="k">assert</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">0</span>
<span class="n">E</span>       <span class="k">assert</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">0</span>

<span class="n">step</span>\<span class="n">pytest</span><span class="o">-</span><span class="mi">1</span>\<span class="n">test_hello_pytest</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">2</span><span class="p">:</span> <span class="ne">AssertionError</span>
<span class="o">===========================================================</span> <span class="n">short</span> <span class="n">test</span> <span class="n">summary</span> <span class="n">info</span> <span class="o">===========================================================</span>
<span class="n">FAILED</span> <span class="n">step</span><span class="o">/</span><span class="n">pytest</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="n">test_hello_pytest</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">test_pytest</span> <span class="o">-</span> <span class="k">assert</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">0</span>
<span class="o">==============================================================</span> <span class="mi">1</span> <span class="n">failed</span> <span class="ow">in</span> <span class="mf">0.11</span><span class="n">s</span> <span class="o">==============================================================</span>
</pre></div>
</div>
<p>å¤±æ•—ã™ã‚‹ã¨ã€ã©ã®éƒ¨åˆ†ã§å¤±æ•—ã—ãŸã‹ãŒç¢ºèªã§ãã¾ã™ã€‚</p>
<p>ã‚³ãƒ¼ãƒ‰è‡ªä½“ã®ã‚¨ãƒ©ãƒ¼ã‚‚åŒæ™‚ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_pytest</span><span class="p">():</span>

    <span class="n">test_val</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">0</span>
    <span class="k">assert</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">test_val</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Windows 10ã®å ´åˆ</span>
<span class="p">(</span><span class="o">.</span><span class="n">venv</span><span class="p">)</span><span class="n">tutorial_docs</span><span class="o">&gt;</span> <span class="n">pytest</span> <span class="o">.</span>\<span class="n">step</span>\<span class="n">pytest</span><span class="o">-</span><span class="mi">1</span>\<span class="n">test_hello_pytest_2</span><span class="o">.</span><span class="n">py</span>

<span class="c1"># macOSã®å ´åˆ</span>
<span class="p">(</span><span class="o">.</span><span class="n">venv</span><span class="p">)</span><span class="n">tutorial_docs</span><span class="o">&amp;</span> <span class="n">pytest</span> <span class="o">./</span><span class="n">step</span><span class="o">/</span><span class="n">pytest</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="n">test_hello_pytest_2</span><span class="o">.</span><span class="n">py</span>

<span class="c1"># ãƒ†ã‚¹ãƒˆçµæœã¯Windows 10ã®ä¾‹</span>
<span class="o">=============================================================</span> <span class="n">test</span> <span class="n">session</span> <span class="n">starts</span> <span class="o">=============================================================</span>
<span class="n">platform</span> <span class="n">win32</span> <span class="o">--</span> <span class="n">Python</span> <span class="mf">3.7</span><span class="o">.</span><span class="mi">3</span><span class="p">,</span> <span class="n">pytest</span><span class="o">-</span><span class="mf">6.0</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="n">py</span><span class="o">-</span><span class="mf">1.9</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="n">pluggy</span><span class="o">-</span><span class="mf">0.13</span><span class="o">.</span><span class="mi">1</span>
<span class="n">rootdir</span><span class="p">:</span> <span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">hiroshi</span>\<span class="n">Documents</span>\<span class="n">pycon</span><span class="o">-</span><span class="n">jp</span><span class="o">-</span><span class="mi">2020</span><span class="o">-</span><span class="n">tutorial</span>\<span class="n">tutorial_docs</span>
<span class="n">collected</span> <span class="mi">1</span> <span class="n">item</span>

<span class="n">step</span>\<span class="n">pytest</span><span class="o">-</span><span class="mi">1</span>\<span class="n">test_hello_pytest_2</span><span class="o">.</span><span class="n">py</span> <span class="n">F</span>                                                                                                   <span class="p">[</span><span class="mi">100</span><span class="o">%</span><span class="p">]</span>

<span class="o">==================================================================</span> <span class="n">FAILURES</span> <span class="o">===================================================================</span>
<span class="n">_________________________________________________________________</span> <span class="n">test_pytest</span> <span class="n">_________________________________________________________________</span>

    <span class="k">def</span> <span class="nf">test_pytest</span><span class="p">():</span>

<span class="o">&gt;</span>       <span class="n">test_val</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">0</span>
<span class="n">E</span>       <span class="ne">ZeroDivisionError</span><span class="p">:</span> <span class="n">division</span> <span class="n">by</span> <span class="n">zero</span>

<span class="n">step</span>\<span class="n">pytest</span><span class="o">-</span><span class="mi">1</span>\<span class="n">test_hello_pytest_2</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">3</span><span class="p">:</span> <span class="ne">ZeroDivisionError</span>
<span class="o">===========================================================</span> <span class="n">short</span> <span class="n">test</span> <span class="n">summary</span> <span class="n">info</span> <span class="o">===========================================================</span>
<span class="n">FAILED</span> <span class="n">step</span><span class="o">/</span><span class="n">pytest</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="n">test_hello_pytest_2</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">test_pytest</span> <span class="o">-</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span> <span class="n">division</span> <span class="n">by</span> <span class="n">zero</span>
<span class="o">==============================================================</span> <span class="mi">1</span> <span class="n">failed</span> <span class="ow">in</span> <span class="mf">0.14</span><span class="n">s</span> <span class="o">==============================================================</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h3>ãƒ†ã‚¹ãƒˆã®æˆåŠŸ<a class="headerlink" href="#id3" title="ã“ã®ãƒ˜ãƒƒãƒ‰ãƒ©ã‚¤ãƒ³ã¸ã®ãƒ‘ãƒ¼ãƒãƒªãƒ³ã‚¯">Â¶</a></h3>
<p>å…ˆã»ã©ã®ã‚µãƒ³ãƒ—ãƒ«ã‚’ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ã‚ˆã†ã«å¤‰æ›´ã—ã¦ã¿ã¾ã—ã‚‡ã†</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_pytest</span><span class="p">():</span>
    <span class="k">assert</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">1</span>
</pre></div>
</div>
<p>å®Ÿè¡Œã™ã‚‹ã¨æˆåŠŸã—ãŸæ§˜å­ãŒç¢ºèªã§ãã¾ã™ã€‚</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Windows 10ã®å ´åˆ</span>
<span class="p">(</span><span class="o">.</span><span class="n">venv</span><span class="p">)</span><span class="n">tutorial_docs</span><span class="o">&gt;</span> <span class="n">pytest</span> <span class="o">.</span>\<span class="n">step</span>\<span class="n">pytest</span><span class="o">-</span><span class="mi">1</span>\<span class="n">test_hello_pytest_3</span><span class="o">.</span><span class="n">py</span>

<span class="c1"># macOSã®å ´åˆ</span>
<span class="p">(</span><span class="o">.</span><span class="n">venv</span><span class="p">)</span><span class="n">tutorial_docs</span><span class="o">&amp;</span> <span class="n">pytest</span> <span class="o">./</span><span class="n">step</span><span class="o">/</span><span class="n">pytest</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="n">test_hello_pytest_3</span><span class="o">.</span><span class="n">py</span>

<span class="c1"># ãƒ†ã‚¹ãƒˆçµæœã¯Windows 10ã®ä¾‹</span>
<span class="o">=============================================================</span> <span class="n">test</span> <span class="n">session</span> <span class="n">starts</span> <span class="o">=============================================================</span>
<span class="n">platform</span> <span class="n">win32</span> <span class="o">--</span> <span class="n">Python</span> <span class="mf">3.7</span><span class="o">.</span><span class="mi">3</span><span class="p">,</span> <span class="n">pytest</span><span class="o">-</span><span class="mf">6.0</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="n">py</span><span class="o">-</span><span class="mf">1.9</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="n">pluggy</span><span class="o">-</span><span class="mf">0.13</span><span class="o">.</span><span class="mi">1</span>
<span class="n">rootdir</span><span class="p">:</span> <span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">hiroshi</span>\<span class="n">Documents</span>\<span class="n">pycon</span><span class="o">-</span><span class="n">jp</span><span class="o">-</span><span class="mi">2020</span><span class="o">-</span><span class="n">tutorial</span>\<span class="n">tutorial_docs</span>
<span class="n">collected</span> <span class="mi">1</span> <span class="n">item</span>

<span class="n">step</span>\<span class="n">pytest</span><span class="o">-</span><span class="mi">1</span>\<span class="n">test_hello_pytest_3</span><span class="o">.</span><span class="n">py</span> <span class="o">.</span>                                                                                                   <span class="p">[</span><span class="mi">100</span><span class="o">%</span><span class="p">]</span>

<span class="o">==============================================================</span> <span class="mi">1</span> <span class="n">passed</span> <span class="ow">in</span> <span class="mf">0.03</span><span class="n">s</span> <span class="o">==============================================================</span>
</pre></div>
</div>
<p>pytestã¯ <code class="docutils literal notranslate"><span class="pre">-v</span></code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãƒ†ã‚¹ãƒˆé–¢æ•°ã‚„ã‚¯ãƒ©ã‚¹ã®ä¸€è¦§ã‚‚è¡¨ç¤ºã§ãã¾ã™ã€‚</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Windows 10ã®å ´åˆ</span>
<span class="p">(</span><span class="o">.</span><span class="n">venv</span><span class="p">)</span><span class="n">tutorial_docs</span><span class="o">&gt;</span> <span class="n">pytest</span> <span class="o">-</span><span class="n">v</span> <span class="o">.</span>\<span class="n">step</span>\<span class="n">pytest</span><span class="o">-</span><span class="mi">1</span>\<span class="n">test_hello_pytest_3</span><span class="o">.</span><span class="n">py</span>

<span class="c1"># macOSã®å ´åˆ</span>
<span class="p">(</span><span class="o">.</span><span class="n">venv</span><span class="p">)</span><span class="n">tutorial_docs</span><span class="o">&amp;</span> <span class="n">pytest</span> <span class="o">-</span><span class="n">v</span> <span class="o">./</span><span class="n">step</span><span class="o">/</span><span class="n">pytest</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="n">test_hello_pytest_3</span><span class="o">.</span><span class="n">py</span>

<span class="c1"># ãƒ†ã‚¹ãƒˆçµæœã¯Windows 10ã®ä¾‹</span>
<span class="o">=============================================================</span> <span class="n">test</span> <span class="n">session</span> <span class="n">starts</span> <span class="o">=============================================================</span>
<span class="n">platform</span> <span class="n">win32</span> <span class="o">--</span> <span class="n">Python</span> <span class="mf">3.7</span><span class="o">.</span><span class="mi">3</span><span class="p">,</span> <span class="n">pytest</span><span class="o">-</span><span class="mf">6.0</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="n">py</span><span class="o">-</span><span class="mf">1.9</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="n">pluggy</span><span class="o">-</span><span class="mf">0.13</span><span class="o">.</span><span class="mi">1</span> <span class="o">--</span> <span class="n">c</span><span class="p">:</span>\<span class="n">users</span>\<span class="n">hiroshi</span>\<span class="n">documents</span>\<span class="n">pycon</span><span class="o">-</span><span class="n">jp</span><span class="o">-</span><span class="mi">2020</span><span class="o">-</span><span class="n">tutorial</span>\<span class="o">.</span><span class="n">venv</span>\<span class="n">scripts</span>\<span class="n">python</span><span class="o">.</span><span class="n">exe</span>
<span class="n">cachedir</span><span class="p">:</span> <span class="o">.</span><span class="n">pytest_cache</span>
<span class="n">rootdir</span><span class="p">:</span> <span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">hiroshi</span>\<span class="n">Documents</span>\<span class="n">pycon</span><span class="o">-</span><span class="n">jp</span><span class="o">-</span><span class="mi">2020</span><span class="o">-</span><span class="n">tutorial</span>\<span class="n">tutorial_docs</span>
<span class="n">collected</span> <span class="mi">1</span> <span class="n">item</span>

<span class="n">step</span><span class="o">/</span><span class="n">pytest</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="n">test_hello_pytest_3</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">test_pytest</span> <span class="n">PASSED</span>                                                                                 <span class="p">[</span><span class="mi">100</span><span class="o">%</span><span class="p">]</span>

<span class="o">==============================================================</span> <span class="mi">1</span> <span class="n">passed</span> <span class="ow">in</span> <span class="mf">0.09</span><span class="n">s</span> <span class="o">==============================================================</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">æ³¨é‡ˆ</p>
<p>pytestã‚³ãƒãƒ³ãƒ‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯æ§˜ã€…ãªç‰©ãŒã‚ã‚Šã¾ã™ã€‚ ä¾‹ãˆã° <cite>-rA</cite> ã¯ ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆçµæœã®ã‚·ãƒ§ãƒ¼ãƒˆã‚µãƒãƒªãƒ¼ãŒè¦‹ã‚Œã¾ã™ã€‚ãƒ†ã‚¹ãƒˆçµæœã¨ãƒ†ã‚¹ãƒˆã®å¤±æ•—ã‚„ã‚¨ãƒ©ãƒ¼æƒ…å ±ãŒãƒ†ã‚¹ãƒˆã”ã¨ã«1ï½2è¡Œã§è¡¨ã•ã‚Œã¾ã™ã€‚</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">.</span><span class="n">venv</span><span class="p">)</span> \<span class="n">step</span>\<span class="n">pytest</span><span class="o">-</span><span class="mi">1</span><span class="o">&gt;</span> <span class="n">pytest</span> <span class="o">-</span><span class="n">ra</span>

<span class="c1"># ãƒ†ã‚¹ãƒˆçµæœã‚’å‰²æ„›ã—ã¦æœ€å¾Œã®ã‚·ãƒ§ãƒ¼ãƒˆã‚µãƒãƒªã®ç®‡æ‰€ã‚’å¼•ç”¨</span>

<span class="o">=================================================================</span> <span class="n">short</span> <span class="n">test</span> <span class="n">summary</span> <span class="n">info</span> <span class="o">==================================================================</span>
<span class="n">PASSED</span> <span class="n">test_fixture_load_json</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">test_check_val1</span>
<span class="n">PASSED</span> <span class="n">test_fixture_load_json</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">test_check_val2</span>
<span class="n">PASSED</span> <span class="n">test_hello_pytest_3</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">test_pytest</span>
<span class="n">PASSED</span> <span class="n">test_monkeypatch_function</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">test_getssh</span>
<span class="n">PASSED</span> <span class="n">test_parametrize</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">test_eval</span><span class="p">[</span><span class="mi">3</span><span class="o">+</span><span class="mi">5</span><span class="o">-</span><span class="mi">8</span><span class="p">]</span>
<span class="n">PASSED</span> <span class="n">test_parametrize</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">test_eval</span><span class="p">[</span><span class="mi">2</span><span class="o">+</span><span class="mi">4</span><span class="o">-</span><span class="mi">6</span><span class="p">]</span>
<span class="n">FAILED</span> <span class="n">test_hello_pytest_1</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">test_pytest</span> <span class="o">-</span> <span class="k">assert</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">2</span>
<span class="n">FAILED</span> <span class="n">test_hello_pytest_2</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">test_pytest</span> <span class="o">-</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span> <span class="n">division</span> <span class="n">by</span> <span class="n">zero</span>
<span class="n">FAILED</span> <span class="n">test_parametrize</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">test_eval</span><span class="p">[</span><span class="mi">6</span><span class="o">*</span><span class="mi">9</span><span class="o">-</span><span class="mi">42</span><span class="p">]</span> <span class="o">-</span> <span class="ne">AssertionError</span><span class="p">:</span> <span class="k">assert</span> <span class="mi">54</span> <span class="o">==</span> <span class="mi">42</span>
</pre></div>
</div>
<p><a class="reference external" href="https://docs.pytest.org/en/stable/usage.html#detailed-summary-report">Usage and Invocations â€” pytest documentation</a></p>
</div>
</div>
</div>
<div class="section" id="id4">
<h2>pytestã®æ©Ÿèƒ½<a class="headerlink" href="#id4" title="ã“ã®ãƒ˜ãƒƒãƒ‰ãƒ©ã‚¤ãƒ³ã¸ã®ãƒ‘ãƒ¼ãƒãƒªãƒ³ã‚¯">Â¶</a></h2>
<p>Pytestã¯ãƒ†ã‚¹ãƒˆã§è‰¯ãæ‰±ã†æ©Ÿèƒ½ãŒã‚ã‚‰ã‹ã˜ã‚ç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«å†…ã§ã¯3ã¤ã®æ©Ÿèƒ½ã«çµã£ã¦èª¬æ˜ã—ã¾ã™ã€‚</p>
<div class="admonition note">
<p class="admonition-title">æ³¨é‡ˆ</p>
<p>pytestã§åˆ©ç”¨ã™ã‚‹æ©Ÿèƒ½ã¯ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãƒ¼ã§ãƒ†ã‚¹ãƒˆé–¢æ•°ã‚„ãƒ¡ã‚½ãƒƒãƒ‰ã«é©å¿œã—ã¾ã™ã€‚
ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãƒ¼ã¯ç³–è¡£é–¢æ•°ã¨å‘¼ã°ã‚Œã‚‹æ§‹æ–‡ã®1ã¤ã§ã™ã€‚æ—¢å­˜ã®é–¢æ•°ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ãƒƒãƒ—ã—ã¦æ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹ãªã©å¤‰åŒ–ã‚’ä¸ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<p>ref: <a class="reference external" href="https://docs.python.org/ja/3/glossary.html#term-decorator">https://docs.python.org/ja/3/glossary.html#term-decorator</a></p>
</div>
<div class="section" id="parametrize">
<h3>parametrize<a class="headerlink" href="#parametrize" title="ã“ã®ãƒ˜ãƒƒãƒ‰ãƒ©ã‚¤ãƒ³ã¸ã®ãƒ‘ãƒ¼ãƒãƒªãƒ³ã‚¯">Â¶</a></h3>
<p>parametrizeã¯ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’ä¸€æ‹¬ã§æ‰±ãˆã‚‹æ©Ÿèƒ½ã§ã™ã€‚</p>
<p>ãƒ†ã‚¹ãƒˆã«å…¥åŠ›ã™ã‚‹å€¤ã¨çµæœã‚’ç”¨æ„ã—ã¦ã€è¤‡æ•°å›åŒã˜ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã¨ãã«å½¹ã«ç«‹ã¡ã¾ã™ã€‚</p>
<p><a class="reference external" href="https://docs.pytest.org/en/stable/parametrize.html">Parametrizing fixtures and test functions â€” pytest documentation</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ref:https://docs.pytest.org/en/stable/parametrize.html</span>
<span class="c1"># content of test_expectation.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;test_input,expected&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="s2">&quot;3+5&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;2+4&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;6*9&quot;</span><span class="p">,</span> <span class="mi">42</span><span class="p">)])</span>
<span class="k">def</span> <span class="nf">test_eval</span><span class="p">(</span><span class="n">test_input</span><span class="p">,</span> <span class="n">expected</span><span class="p">):</span>
    <span class="k">assert</span> <span class="nb">eval</span><span class="p">(</span><span class="n">test_input</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected</span>
</pre></div>
</div>
</div>
<div class="section" id="fixture">
<h3>fixture<a class="headerlink" href="#fixture" title="ã“ã®ãƒ˜ãƒƒãƒ‰ãƒ©ã‚¤ãƒ³ã¸ã®ãƒ‘ãƒ¼ãƒãƒªãƒ³ã‚¯">Â¶</a></h3>
<p>fixtureã¯ãƒ†ã‚¹ãƒˆã™ã‚‹æ©Ÿèƒ½ã‚’å®Ÿè¡Œã™ã‚‹å‰ã®æº–å‚™ã‚„çµ‚äº†å‡¦ç†ã‚’å…±é€šåŒ–ã—ãŸã„ã¨ãã«åˆ©ç”¨ã—ã¾ã™ã€‚å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã®ç”¨æ„ã‚„èªè¨¼æƒ…å ±ã®è¨­å®šã€çµ‚äº†æ™‚ã«ä¸€æ™‚çš„ã«ç”Ÿæˆã—ãŸãƒ‡ãƒ¼ã‚¿ã®é™¤å»ãŒã‚ˆãã‚ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚</p>
<p><a class="reference external" href="https://docs.pytest.org/en/stable/fixture.html">pytest fixtures: explicit, modular, scalable â€” pytest documentation</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="c1"># jsonã‚’loadã™ã‚‹å…±é€šã®é–¢æ•°</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">get_json_dict</span><span class="p">():</span>

    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        {&quot;k1&quot;: &quot;testval1&quot;, &quot;k2&quot;: &quot;testval2&quot;}</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="p">)</span>


<span class="c1"># fixtureã‚’ä½¿ã„ãŸã„ãƒ†ã‚¹ãƒˆé–¢æ•°ã«fixtureåŒ–ã—ãŸé–¢æ•°ã‚’å¼•æ•°ã¸æŒ‡å®šã™ã‚‹</span>
<span class="k">def</span> <span class="nf">test_check_val1</span><span class="p">(</span><span class="n">get_json_dict</span><span class="p">):</span>
    <span class="n">json_dict</span> <span class="o">=</span> <span class="n">get_json_dict</span>
    <span class="k">assert</span> <span class="s2">&quot;testval1&quot;</span> <span class="o">==</span> <span class="n">json_dict</span><span class="p">[</span><span class="s2">&quot;k1&quot;</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">test_check_val2</span><span class="p">(</span><span class="n">get_json_dict</span><span class="p">):</span>
    <span class="n">json_dict</span> <span class="o">=</span> <span class="n">get_json_dict</span>
    <span class="k">assert</span> <span class="s2">&quot;testval1&quot;</span> <span class="o">!=</span> <span class="n">json_dict</span><span class="p">[</span><span class="s2">&quot;k2&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="monkeypatch">
<h3>monkeypatch<a class="headerlink" href="#monkeypatch" title="ã“ã®ãƒ˜ãƒƒãƒ‰ãƒ©ã‚¤ãƒ³ã¸ã®ãƒ‘ãƒ¼ãƒãƒªãƒ³ã‚¯">Â¶</a></h3>
<p>monkeypatchã¯pythonã®Unittest.mockã®ã‚ˆã†ãªæ©Ÿèƒ½ã§ã™ã€‚ãƒ¢ãƒƒã‚¯ã¨ãªã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç½®ãæ›ãˆã‚‹éš›ã«åˆ©ç”¨ã—ã¾ã™ã€‚</p>
<p>ç½®ãæ›ãˆã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè‡ªä½“ã¯ãƒ†ã‚¹ãƒˆå°‚ç”¨ã®æ©Ÿèƒ½ã‚’ä½¿ã£ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ãªãã€æˆ»ã‚Šå€¤ã‚„æŒ™å‹•ãŒåŒç­‰ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ã§æ©Ÿèƒ½ã—ã¾ã™ã€‚</p>
<p>å…¬å¼ã®å†’é ­ã«ã‚ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’å‹•ã‹ã—ã¦ã¿ã¾ã—ã‚‡ã†</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ref:https://docs.pytest.org/en/6.0.1/monkeypatch.html#simple-example-monkeypatching-functions</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>


<span class="c1"># ãƒ†ã‚¹ãƒˆå¯¾è±¡ã®é–¢æ•°</span>
<span class="k">def</span> <span class="nf">getssh</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span> <span class="o">/</span> <span class="s2">&quot;.ssh&quot;</span>


<span class="c1"># ãƒ†ã‚¹ãƒˆæœ¬ä½“</span>
<span class="k">def</span> <span class="nf">test_getssh</span><span class="p">(</span><span class="n">monkeypatch</span><span class="p">):</span>
    <span class="c1"># ç½®ãæ›ãˆã‚‹é–¢æ•°ã‚’ç”¨æ„ã™ã‚‹</span>
    <span class="k">def</span> <span class="nf">mockreturn</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;/abc&quot;</span><span class="p">)</span>

    <span class="c1"># pathlib.Pathã®homeãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç½®ãæ›ãˆã¾ã™</span>
    <span class="n">monkeypatch</span><span class="o">.</span><span class="n">setattr</span><span class="p">(</span><span class="n">Path</span><span class="p">,</span> <span class="s2">&quot;home&quot;</span><span class="p">,</span> <span class="n">mockreturn</span><span class="p">)</span>

    <span class="c1"># getsshé–¢æ•°å†…ã®pathlib.Path.home -&gt; mockreturnã«ç½®ãæ›ãˆã¦å®Ÿè¡Œã•ã‚Œã¾ã™</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">getssh</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">x</span> <span class="o">==</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;/abc/.ssh&quot;</span><span class="p">)</span>


<span class="c1"># â€»monkeypathc.setattrã§ç½®ãæ›ãˆã‚‹ç‰©ã¯é–¢æ•°ã§ãªã‘ã‚Œã°ã„ã‘ãªã„ï¼ˆå†…éƒ¨ã§setattré–¢æ•°ã‚’ä½¿ã£ã¦ã„ã‚‹ãŸã‚ï¼‰</span>
<span class="c1"># ref:https://github.com/pytest-dev/pytest/blob/303030c14130a5777bdaace678b9f4adb07416ab/src/_pytest/monkeypatch.py#L209</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id5">
<h2>pytestã‚³ãƒãƒ³ãƒ‰ã¯è‡ªå‹•çš„ã«ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¢ã™<a class="headerlink" href="#id5" title="ã“ã®ãƒ˜ãƒƒãƒ‰ãƒ©ã‚¤ãƒ³ã¸ã®ãƒ‘ãƒ¼ãƒãƒªãƒ³ã‚¯">Â¶</a></h2>
<p>ã¾ãŸpytestã¯è‡ªå‹•çš„ã«ãƒ†ã‚¹ãƒˆã¨ã—ã¦å®Ÿè¡Œå¯èƒ½ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¢ã—ã¾ã™ã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä¸Šã§pytestã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã•ã›ã‚‹ã ã‘ã§ç°¡å˜ã«ãƒ†ã‚¹ãƒˆã®å®Ÿè¡ŒãŒå‡ºæ¥ã¾ã™ã€‚</p>
<p><code class="docutils literal notranslate"><span class="pre">./tutorial_docs/step/pytest-1</span></code> ã¨ã„ã†ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¸Šè¨˜ã¾ã§ã«æ‰±ã£ãŸãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã™ãŒã€ã“ã“ã§ã¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ç§»å‹•ã•ã›ã¦pytestã®å®Ÿè¡Œã‚’ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Windows 10ã®å ´åˆ
(.venv) tutorial_docs&gt; cd .\tutorial_docs\step\pytest-1
(.venv) pytest-1&gt; pytest

# macOSã®å ´åˆ
(.venv) tutorial_docs$ cd ./tutorial_docs/step/pytest-1
(.venv) pytest-1$ pytest
</pre></div>
</div>
<p>ä¸Šè¨˜ã¾ã§ã®èª¬æ˜ã§åˆ©ç”¨ã—ãŸãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚æˆåŠŸã€å¤±æ•—ã™ã‚‹ãƒ†ã‚¹ãƒˆãŒã„ãã¤ã‹ã‚ã‚‹ã‹ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<p>ç¢ºèªãŒçµ‚ã‚ã£ãŸã‚‰ã€ cdã‚³ãƒãƒ³ãƒ‰ã§tutorial_docsãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¾ã§ç§»å‹•ã—ã¦ãã ã•ã„ã€‚</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Windows 10ã®å ´åˆ
(.venv) pytest-1&gt; cd ..\..\..\
(.venv) tutorial_docs&gt;

# macOSã®å ´åˆ
(.venv) pytest-1$ cd ../../../
(.venv) tutorial_docs$
</pre></div>
</div>
</div>
<div class="section" id="id6">
<h2>ä¼‘æ†©3ğŸ§˜â€â™‚ï¸<a class="headerlink" href="#id6" title="ã“ã®ãƒ˜ãƒƒãƒ‰ãƒ©ã‚¤ãƒ³ã¸ã®ãƒ‘ãƒ¼ãƒãƒªãƒ³ã‚¯">Â¶</a></h2>
<p>pytestã®åŸºæœ¬çš„ãªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¨ã€ä¾¿åˆ©ãªæ©Ÿèƒ½ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚æƒ…å ±é‡ã‚‚å¤šã‹ã£ãŸã¨æ€ã†ã®ã§ã€ã“ã®ã‚ãŸã‚Šã§ä¼‘æ†©ã—ã¾ã—ã‚‡ã†ã€‚</p>
<p>ãŠã‚„ã¤ã‚‚è‰¯ã„ã®ã§ã™ãŒã€ä¸€æ—¥ä¸­åº§ã‚Šã£ã±ãªã—ã‚‚ä½“ã«è‰¯ããªã„ã§ã™ã€‚ç«‹ã¡ä¸ŠãŒã£ã¦èƒŒä¼¸ã³ã‚’ã™ã‚‹ãªã©ã‚¹ãƒˆãƒ¬ãƒƒãƒã‚’ã—ã¾ã—ã‚‡ã†ï¼ğŸ§˜â€â™‚ï¸</p>
</div>
<div class="section" id="slackbot">
<h2>SlackBotã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’æ›¸ã„ã¦ã¿ã‚ˆã†<a class="headerlink" href="#slackbot" title="ã“ã®ãƒ˜ãƒƒãƒ‰ãƒ©ã‚¤ãƒ³ã¸ã®ãƒ‘ãƒ¼ãƒãƒªãƒ³ã‚¯">Â¶</a></h2>
<p>ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ä½œæˆã—ã¦ã„ã‚‹Slackbotã®ãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<p>Slackbotã¯Slackãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã¨ã®é€£æºãŒå¿…è¦ã«ãªã‚Šã¾ã™ãŒã€ã“ã®ãƒ†ã‚¹ãƒˆã¯ãã†ã„ã£ãŸå¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã¨ã®é€£æºãƒ†ã‚¹ãƒˆã‚’æƒ³å®šã—ã¦ã„ã¾ã›ã‚“ã€‚botã¨ã—ã¦è¿”ç­”ã™ã‚‹æƒ…å ±ãŒæ­£ã—ã„ã‹ã®å˜ä½“ãƒ†ã‚¹ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚</p>
<div class="section" id="id7">
<h3>ä¸‹æº–å‚™<a class="headerlink" href="#id7" title="ã“ã®ãƒ˜ãƒƒãƒ‰ãƒ©ã‚¤ãƒ³ã¸ã®ãƒ‘ãƒ¼ãƒãƒªãƒ³ã‚¯">Â¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pt_slackbot</span></code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã« <code class="docutils literal notranslate"><span class="pre">tests</span></code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã¾ã™(ä½œæˆã¯VS Codeã‚„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«çµŒç”±ã§ã‚‚è‰¯ã„ã§ã™ï¼‰</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tests</span></code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã« <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code>ã€€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Špytestã¯testsãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ãƒ†ã‚¹ãƒˆãŒå…¥ã£ã¦ã„ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨ã—ã¦èªè­˜ã—ã¾ã™</p></li>
</ul>
</div>
<div class="section" id="bot">
<h3>å„botã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã«ã¤ã„ã¦<a class="headerlink" href="#bot" title="ã“ã®ãƒ˜ãƒƒãƒ‰ãƒ©ã‚¤ãƒ³ã¸ã®ãƒ‘ãƒ¼ãƒãƒªãƒ³ã‚¯">Â¶</a></h3>
<ul class="simple">
<li><p>æŒ¨æ‹¶bot: ãƒ©ãƒ³ãƒ€ãƒ ãªè¿”ç­”ã‚’ã™ã‚‹é–¢æ•°ã‚’monkeypatchã§ç½®ãæ›ãˆã‚‹</p></li>
<li><p>connpass bot: jsonã®å–å¾—ã‚’monkeypatchã§ç½®ãæ›ãˆ</p></li>
<li><p>å¤©æ°—bot: æ°—è±¡åºxmlã®å–å¾—ã‚’monkeypatchã§ç½®ãæ›ãˆã€parametarizeã§åœ°åŸŸã®è¿½åŠ </p></li>
</ul>
<p>ã“ã®ç« ã§ä½¿ã†è³‡æ–™ã¯ä»¥ä¸‹ã®URLï¼ˆãƒ‘ã‚¹ï¼‰ã‹ã‚‰å‚ç…§ã§ãã¾ã™ã€‚</p>
<p><a class="reference external" href="https://github.com/py-suruga/pycon-jp-2020-tutorial/tree/master/tutorial_docs/step/pytest-2">pycon-jp-2020-tutorial/tutorial_docs/step/pytest-2</a></p>
</div>
</div>
<div class="section" id="id8">
<h2>ä¼‘æ†©4ğŸªâ˜•<a class="headerlink" href="#id8" title="ã“ã®ãƒ˜ãƒƒãƒ‰ãƒ©ã‚¤ãƒ³ã¸ã®ãƒ‘ãƒ¼ãƒãƒªãƒ³ã‚¯">Â¶</a></h2>
<p>pytestã‚’ä½¿ã£ã¦botã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’ä½œæˆã—ã¾ã—ãŸã€‚ãƒ†ã‚¹ãƒˆã‚’ä½œæˆã™ã‚‹ã“ã¨ã§ä½œæˆã‚„å¤‰æ›´ã—ãŸã‚³ãƒ¼ãƒ‰ã«å¯¾ã—ã¦ã®ä¿¡é ¼æ€§ã‚’æŒãŸã›ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚æ¬¡ã¯ã€Sphinxã‚’ä½¿ã„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚</p>
<p>ã“ã®è¾ºã§ä¼‘æ†©ã§ã™ã€‚ãã‚ãã‚ã‚³ãƒ¼ãƒ’ãƒ¼ã‹ãŠèŒ¶ãŒé£²ã¿ãŸã„é ƒã§ã™ã­ã€‚ç”¨æ„ã—ã¦ãŠãã¾ã—ã‚‡ã†â˜•</p>
<img alt="_images/oyatu-2.jpg" src="_images/oyatu-2.jpg" />
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="sphinx.html" class="btn btn-neutral float-right" title="Sphinxã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›¸ã“ã†" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="slackbot.html" class="btn btn-neutral float-left" title="Slackbotã®ä½œæˆ" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; è‘—ä½œæ¨© 2020, Py-Suruga, Unagi-py, Hiroshi sano

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>